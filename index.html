<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" href="../styles.css">
        <title>Severyanin</title>
        <script src="../Scripts/hero.js" defer></script>
        <script src="../Scripts/slider.js" defer></script>
        <script src="../Scripts/magnbtn.js" defer></script>
        <script src="../Scripts/headeranimation.js" defer></script>
        <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
        <script src="https://unpkg.com/@barba/core"></script>
        <script src="https://unpkg.com/gsap@latest/dist/gsap.min.js"></script>
        <script src="https://unpkg.com/gsap@latest/dist/ScrollTrigger.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/ScrollMagic.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/ScrollMagic/2.0.7/plugins/debug.addIndicators.min.js"></script>
    </head>
    <body>
        <!-- Шапка -->
        <script src="Components/header.js"></script>
        <!-- Умный поиск -->
        <div class="hero_search">
            <div class="column">
                <div><b>Простой помощникd поиска в нашем большого ассортименте</b></div>
                <div>Выберите услугу, затем выберите нужную вам категорию</div>
            </div>
            <div class="row">
                <button class="yellow-border-btn magnetic">АРЕНДА</button>
                <button class="yellow-border-btn magnetic">ПОКУПКА</button>
            </div>
            <div class="row-2">
                <div class="hero">
                    <button class="category-button">Выбор категории</button>
                    <img src="../img/down_selection_arrow.svg" alt="Стрелка вниз до нажатия" class="arrow-svg">
                    <!-- Переносим модальное окно сюда -->
                </div>
                <button class="yellow-button magnetic">НАЧАТЬ ПОИСК</button>
            </div>
        </div>
        <!-- Окошко категорий умного поиска аренды -->
        <div class="category-popup">
            <ul class="category-list">
                <li><a href="../Catalog/Wall-formwork/wall-formwork.html">Арендовать опалубку стен</a></li>
                <li><a href="../Catalog/Floor-Formwork/floor-formwork.html">Арендовать опалубку перекрытий</a></li>
                <li><a href="../Catalog/Columns-Formwork/columns-formwork.html">Арендовать опалубку колонн</a></li>
                <li><a href="../Catalog/Accessories-Formwork/accessories-formwork.html">Арендовать комплектующие для опалубки</a></li>
                <li><a href="../Catalog/Bridge-Formwork/bridge-formwork.html">Арендовать мостовые опорные подмости</a></li>
                <li><a href="../Catalog/auto-rent/auto-rent.html">Арендовать технику</a></li>
            </ul>
        </div>
        <!-- Окошко категорий умного поиска покупки -->
        <div class="category-popup-sell">
            <ul class="category-list">
                <li><a href="../Catalog/Wall-formwork/wall-formwork.html">Купить опалубку стен</a></li>
                <li><a href="../Catalog/Floor-Formwork/floor-formwork.html">Купить опалубку перекрытий</a></li>
                <li><a href="../Catalog/Columns-Formwork/columns-formwork.html">Купить опалубку колонн</a></li>
                <li><a href="../Catalog/Accessories-Formwork/accessories-formwork.html">Купить комплектующие для опалубки</a></li>
                <li><a href="../Catalog/Bridge-Formwork/bridge-formwork.html">Купить мостовые опорные подмости</a></li>
            </ul>
        </div>
        <!-- Начало основных блоков -->
        <main>
            <!-- Первый блок -->
            <main class="first-main">
                <!-- Первое видео -->
                <video class="video1" id="video" autoplay muted>
                    Ваш браузер не поддерживает видео.
                </video>
                <div class="overlay">
                </div>
                <div class="text-overlay">
                    <h1>Аренда и продажа опалубки для <br> монолитного строительства в РФ</h1>
                    <p>В наличии большой парк опалубки - более 18000 квадратных метров</p>
                </div>
            </main>
            <!-- HTML код для слайдера -->
            <main class="second-main">
                
                <div class="zagolovok">
                    <h1>Популярные категории</h1>
                </div>
                <button class="prev-btn magnetic"><</button>
                <button class="next-btn magnetic">></button>
                <div class="slider">
                    <!-- Слайд 1 -->
                    <div class="slide">
                        <div class="slide-content">
                            <div class="product-info">
                                <h2 class="product-title">Щитовая Опалубка</h2>
                                <p class="product-description">Идеальное решение для создания прочных и долговечных бетонных конструкций любой сложности. Рекомендуется для строительства зданий, мостов, и других инженерных сооружений.</p>
                                <div class="product-actions">
                                    <button class="yellow-button-b magnetic">АРЕНДОВАТЬ</button>
                                    <button class="gray-button-green magnetic">КУПИТЬ</button>
                                </div>
                            </div>
                            
                        </div>
                        <img src="../img/slider/s1.jpeg" alt="Product 1" class="product-image">
                    </div>
                    <!-- Слайд 2 -->
                    <div class="slide">
                        <div class="slide-content">
                            <div class="product-info">
                                <h2 class="product-title">Опалубка перекрытий</h2>
                                <p class="product-description">Отличный выбор для быстрой и качественной укладки бетонных перекрытий. Рекомендуется для строительства жилых и коммерческих зданий, где требуется прочное основание и ровное покрытие.</p>
                                <div class="product-actions">
                                    <button class="yellow-button-b magnetic">АРЕНДОВАТЬ</button>
                                    <button class="gray-button-green magnetic">КУПИТЬ</button>
                                </div>
                            </div>
                        </div>
                        <img src="../img/slider/s2.jpeg" alt="Product 2" class="product-image">
                    </div>
                    <!-- Слайд 3 -->
                    <div class="slide">
                        <div class="slide-content">
                            <div class="product-info">
                                <h2 class="product-title">Комплектующие Для Опалубки</h2>
                                <p class="product-description">Широкий выбор дополнительных комплектующих для успешной установки и использования опалубки. Рекомендуем для обеспечения качественного выполнения строительных работ.</p>
                                <div class="product-actions">
                                    <button class="yellow-button-b magnetic">АРЕНДОВАТЬ</button>
                                    <button class="gray-button-green magnetic">КУПИТЬ</button>
                                </div>
                            </div>
                        </div>
                        <img src="../img/slider/s3.jpeg" alt="Product 3" class="product-image">
                    </div>
                </div>
            </main>
            <div class="zagolovok1">
                <h1>Наши объекты</h1>
            </div> 
                <!-- Третий мэйн -->
                
            <main class="third-main">
                <div class="background-rectangle"></div> 
                    <!-- Фото 1 -->
                    <div class="photo-cont">
                        <img src="img/portfolio/hrampatr/1.jpg" alt="Photo 1">
                        <img class="second-photo" src="../img/portfolio/hrampatr/2.jpg" alt="Photo 1-2">
                        <div class="text-overlay2">Храм Патриот</div>
                    </div>
                    <!-- Фото 2 -->
                    <div class="photo-cont">
                        <img src="img/portfolio/vserosdetcentr/1.jfif" alt="Photo 2">
                        <img class="second-photo" src="../img/portfolio/vserosdetcentr/2.jfif" alt="Photo 2-2">
                        <div class="text-overlay2">Всероссийский детский центр</div>
                    </div>
                    <!-- Фото 3 -->
                    <div class="photo-cont">
                        <img src="img/portfolio/tcshelk/2.jpg" alt="Photo 3">
                        <img class="second-photo" src="../img/portfolio/tcshelk/1.jpg" alt="Photo 3-2">
                        <div class="text-overlay2">ТЦ Шёлковый Путь</div>
                    </div>
            </main>
            <!-- HTML код для кнопки "Посмотреть все проекты" -->
            <div class="explore-projects">
                <a href="../Porfolio/portfolio.html">
                    <button class="explore-button magnetic"> Посмотреть все проекты</button>
                </a>
                
            </div>

            

        </main>

        <script src="../Components/footer.js" defer></script>


        <script>
            // Scroll down
            const targets = gsap.utils.toArray(".third-main");
            targets.forEach(container => {
                gsap.to(container, {
                x: () => -(container.scrollWidth - document.documentElement.clientWidth) + "px",
                ease: "none",
                scrollTrigger: {
                    trigger: container,
                    invalidateOnRefresh: true,
                    pin: true,
                    scrub: 1,
                    end: () => "+=" + container.offsetWidth
                }
                });
            });

            ScrollTrigger.sort();

            // Видео часть в первом мэине

            const video = document.querySelector('#video');

            const sources = [
                '../vid/vid1.mp4',
                '../vid/vid2.mp4'
            ];

            let currentSourceIndex = 0;

            function switchVideo() {
                currentSourceIndex = (currentSourceIndex + 1) % sources.length;
                const nextSource = sources[currentSourceIndex];
                
                // Создаем анимацию плавного изменения прозрачности видео
                gsap.to(video, {
                    opacity: 0,
                    duration: 0.1,
                    onComplete: function() {
                        // После завершения анимации заменяем источник видео
                        video.src = nextSource;
                        
                        // Создаем анимацию плавного изменения прозрачности видео
                        gsap.to(video, { opacity: 1, duration: 0.5 });
                        
                        // Воспроизводим видео
                        video.play();
                    }
                });
            }

            // Вызываем функцию switchVideo, чтобы начать воспроизведение первого видео
            switchVideo();

            // Добавляем обработчик события 'timeupdate', чтобы начать плавное изменение прозрачности перед концом первого видео
            video.addEventListener('timeupdate', function() {
                const threshold = 0.95; // Порог времени, когда начинается анимация перед концом видео
                if (video.currentTime / video.duration >= threshold) {
                    // Начинаем анимацию плавного изменения прозрачности перед концом видео
                    gsap.to(video, { opacity: 0, duration: 0.5 });
                }
            });

            // Добавляем обработчик события 'ended', чтобы переключать видео по окончании текущего
            video.addEventListener('ended', switchVideo);


        </script>


    </body>
</html>
